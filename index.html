<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡πÄ‡∏Å‡∏°‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏Ñ‡∏≥‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏õ‡∏£‡∏∞‡∏ñ‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏õ‡∏µ‡∏ó‡∏µ‡πà 4</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700&display=swap');
        :root {
            --primary-color: #3498db;
            --secondary-color: #2980b9; 
            --correct-color: #27ae60;
            --incorrect-color: #e74c3c;
            --bg-light: #ecf0f1;
            --text-dark: #2c3e50;
        }
        html, body {
            height: 100%;
            overflow: hidden; /* ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ */
            margin: 0;
        }
        body {
            font-family: 'Sarabun', sans-serif;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px 0;
            user-select: none;
            background-image: url('https://lh5.googleusercontent.com/d/1p28Ss160fZWFSe67QLrgHvPcZgN4bgAZ'); /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ */
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        #game-container { 
            width: 95%; 
            max-width: 1100px;
            background-color: rgba(255, 255, 255, 0.98); 
            padding: 20px; 
            border-radius: 15px; 
            box-shadow: 0 4px 20px rgba(0,0,0,0.2); 
            text-align: center; 
        }
        h1 { color: #0056b3; font-size: 2.2em; margin: 10px 0; }
        h2 { font-size: 1.1em; margin: 10px 0; }
        #game-info { display: flex; justify-content: space-around; align-items: center; font-size: 1.4em; margin-bottom: 10px; font-weight: bold; flex-wrap: wrap; }
        #hearts { color: var(--incorrect-color); }
        #timer { color: #f39c12; }
        #score { color: var(--correct-color); }
        #question-area { background-color: #eef5ff; padding: 10px; border-radius: 10px; margin-bottom: 10px; }
        #answer-box { 
            display: flex; 
            align-items: center; 
            min-height: 60px; 
            background-color: var(--bg-light); 
            padding: 5px 10px; 
            border-radius: 10px; 
            border: 2px solid #bdc3c7; 
            margin-bottom: 10px;
        }
        #answer-text { 
            flex-grow: 1; 
            text-align: center; 
            font-size: 2em; 
            font-weight: bold; 
            color: var(--text-dark); 
            letter-spacing: 2px;
            min-height: 40px;
            overflow-wrap: break-word;
        }
        .button-container { margin-top: 15px; display: flex; justify-content: center; gap: 15px; }
        button { font-family: 'Sarabun', sans-serif; font-size: 1.2em; padding: 10px 25px; border-radius: 8px; border: none; color: white; cursor: pointer; transition: background-color 0.3s; }
        #check-btn { background-color: var(--correct-color); }
        #play-sound-btn { font-size: 1.5em; background-color: #9b59b6; padding: 10px; }

        #keyboard-container { 
            margin-top: 10px; 
            padding: 0 1%;
            max-width: 850px;
            margin-left: auto;
            margin-right: auto;
        }
        .keyboard-row { 
            display: flex; 
            justify-content: center; 
            gap: 0.8%; 
            margin-bottom: 6px; /* ‡∏•‡∏î‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡πÅ‡∏ñ‡∏ß */
        }
        .key {
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            flex: 1;
            min-width: 40px;
            max-width: 70px;
            height: 42px; /* ‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏Ç‡∏≠‡∏á‡∏õ‡∏∏‡πà‡∏° */
            background-color: #fcfcfc;
            border: 1px solid #ccc;
            border-bottom-width: 3px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
        }
        .key:active { transform: translateY(2px); border-bottom-width: 1px; }
        .key.special { flex-grow: 2.5; max-width: 220px; background-color: #d5d8dc;}
        .key.space { flex-grow: 8; max-width: 450px; }

        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.75); display: flex; justify-content: center; align-items: center; z-index: 1000; transition: opacity 0.3s; }
        .overlay.hidden { display: none; }
        
        /* --- Spinner & Feedback Overlay Styles (IMPROVED) --- */
        .box { 
            background-color: rgba(255, 255, 255, 0.95); /* ‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÅ‡∏™‡∏á */
            color: #333; /* ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏™‡∏µ‡∏î‡∏≥ */
            padding: 30px 40px; 
            border-radius: 15px; 
            text-align: center; 
            box-shadow: 0 0 20px rgba(0,0,0,0.5); 
            width: 500px; /* ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏™‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°‡∏ú‡∏∑‡∏ô‡∏ú‡πâ‡∏≤ */
            min-height: 250px; /* ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥ */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        #spinner-result { font-size: 3em; font-weight: bold; margin-bottom: 20px; min-height: 60px; color: #0056b3; }
        #spin-btn, #start-question-btn, #next-question-btn { font-size: 1.2em; }
        #spin-btn { background-color: #8e44ad; }
        #start-question-btn { background-color: #f39c12; display: none; }
        #feedback-box.correct { border-top: 10px solid var(--correct-color); }
        #feedback-box.incorrect { border-top: 10px solid var(--incorrect-color); }
        #feedback-title { font-size: 2.5em; margin: 0; }
        #feedback-text { font-size: 1.5em; margin: 10px 0 20px; }
        #next-question-btn { background-color: var(--primary-color); margin-top: 15px; }
        #next-question-btn:hover { background-color: var(--secondary-color); }
    </style>
</head>
<body>
    <div id="game-container" style="display:none;">
        <h1>‡πÄ‡∏Å‡∏°‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏Ñ‡∏≥‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏õ‡∏£‡∏∞‡∏ñ‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏õ‡∏µ‡∏ó‡∏µ‡πà 4</h1>
        <div id="game-info">
            <div id="score">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: <span>0</span></div>
            <div id="timer">‚è±Ô∏è ‡πÄ‡∏ß‡∏•‡∏≤: <span>60</span></div>
            <div id="hearts">‚ù§Ô∏è ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï: <span>3</span></div>
        </div>
        <div id="question-area">
            <h2>‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏£‡∏π‡∏õ‡∏•‡∏≥‡πÇ‡∏û‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ü‡∏±‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á ‡πÅ‡∏•‡πâ‡∏ß‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á</h2>
            <button id="play-sound-btn">üîä</button>
        </div>
        <div id="answer-box">
            <span id="answer-text"></span>
        </div>
        <div id="keyboard-container"></div>
        <div class="button-container">
            <button id="check-btn">‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
        </div>
    </div>

    <div id="spinner-overlay" class="overlay">
        <div id="spinner-box" class="box">
            <h2>‡∏™‡∏∏‡πà‡∏°‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏ï‡∏≠‡∏ö!</h2>
            <div id="spinner-result">???</div>
            <button id="spin-btn">‡∏™‡∏∏‡πà‡∏°‡∏ä‡∏∑‡πà‡∏≠</button>
            <button id="start-question-btn">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏ô‡∏µ‡πâ</button>
        </div>
    </div>

    <div id="feedback-overlay" class="overlay hidden">
        <div id="feedback-box" class="box">
            <h2 id="feedback-title"></h2>
            <p id="feedback-text"></p>
            <button id="next-question-btn">‡∏Ç‡πâ‡∏≠‡∏ï‡πà‡∏≠‡πÑ‡∏õ</button>
        </div>
    </div>

    <audio id="word-audio" preload="auto"></audio>
    <audio id="correct-sound" src="https://www.myinstants.com/media/sounds/thuukt-ng.mp3" preload="auto"></audio>
    <audio id="incorrect-sound" src="https://www.myinstants.com/media/sounds/phid.mp3" preload="auto"></audio>
    <audio id="spinner-sound" src="https://www.myinstants.com/media/sounds/yaa.mp3" preload="auto"></audio>
    <audio id="action-sound" src="https://www.myinstants.com/media/sounds/pop_7e9Is8L.mp3" preload="auto"></audio>

    <script>
        const studentNames = [ "‡∏ï‡∏∞‡∏ß‡∏±‡∏ô", "‡∏™‡∏ï‡∏£‡∏¥‡∏á", "‡∏ì‡∏¥‡∏ä‡∏≤", "‡∏Å‡∏±‡∏ç‡∏ç‡πå", "‡∏≠‡∏π‡πã", "‡πÄ‡∏à‡∏•", "‡∏≠‡∏≠‡∏£‡πå‡πÅ‡∏Å‡∏ô", "‡∏ß‡∏µ‡πÇ‡∏Å‡πâ", "‡∏Å‡∏°‡∏•‡∏ä‡∏±‡∏¢", "‡∏ß‡∏≤‡∏ß‡∏≤" ];
        const wordList = [
            { word: "‡∏Å‡∏é‡πÄ‡∏Å‡∏ì‡∏ë‡πå", audio: "https://www.myinstants.com/media/sounds/kdeknth.mp3" },
            { word: "‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢", audio: "https://www.myinstants.com/media/sounds/kdhmaay.mp3" },
            { word: "‡∏Å‡∏ï‡πÄ‡∏ß‡∏ó‡∏µ", audio: "https://www.myinstants.com/media/sounds/ktewthii.mp3" },
            { word: "‡∏Å‡∏ï‡∏±‡∏ç‡∏ç‡∏π", audio: "https://www.myinstants.com/media/sounds/ktayyuu.mp3" },
            { word: "‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤", audio: "https://www.myinstants.com/media/sounds/ktikaa.mp3" },
            { word: "‡∏Å‡πâ‡∏ô", audio: "https://www.myinstants.com/media/sounds/kn_g3unyRS.mp3" },
            { word: "‡∏Å‡∏£", audio: "https://www.myinstants.com/media/sounds/k-n_Li3PmUo.mp3" },
            { word: "‡∏Å‡∏£‡∏°", audio: "https://www.myinstants.com/media/sounds/krm.mp3" },
            { word: "‡∏Å‡∏£‡∏°‡∏û‡∏£‡∏∞‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÄ‡∏û‡∏ä‡∏£‡∏≠‡∏±‡∏Ñ‡∏£‡πÇ‡∏¢‡∏ò‡∏¥‡∏ô", audio: "https://www.myinstants.com/media/sounds/krmphrakamaephngephchr-akhroythin.mp3" },
            { word: "‡∏Å‡∏£‡∏°‡∏û‡∏£‡∏∞‡∏õ‡∏£‡∏°‡∏≤‡∏ô‡∏∏‡∏ä‡∏¥‡∏ï‡∏ä‡∏¥‡πÇ‡∏ô‡∏£‡∏™", audio: "https://www.myinstants.com/media/sounds/krmphraprmaanuchitchionrs.mp3" }
        ];
        
        const thaiKeyboardLayout = [
            ['‡∏Å', '‡∏Ç', '‡∏É', '‡∏Ñ', '‡∏Ö', '‡∏Ü', '‡∏á', '‡∏à', '‡∏â', '‡∏ä', '‡∏ã'],
            ['‡∏å', '‡∏ç', '‡∏é', '‡∏è', '‡∏ê', '‡∏ë', '‡∏í', '‡∏ì', '‡∏î', '‡∏ï', '‡∏ñ'],
            ['‡∏ó', '‡∏ò', '‡∏ô', '‡∏ö', '‡∏õ', '‡∏ú', '‡∏ù', '‡∏û', '‡∏ü', '‡∏†', '‡∏°'],
            ['‡∏¢', '‡∏£', '‡∏•', '‡∏ß', '‡∏®', '‡∏©', '‡∏™', '‡∏´', '‡∏¨', '‡∏≠', '‡∏Æ'],
            ['‡∏∞', '‡∏≤', '‡∏≥','‡∏±', '‡∏¥', '‡∏µ', '‡∏∂', '‡∏∑', '‡∏∏', '‡∏π'],
            ['‡πÄ', '‡πÅ', '‡πÇ', '‡πÉ', '‡πÑ', '‡∏§', '‡∏¶'],
            ['‡πà', '‡πâ', '‡πä', '‡πã', '‡πå', '‡πÜ']
        ];


        const gameContainer = document.getElementById('game-container');
        const scoreEl = document.querySelector('#score span');
        const timerEl = document.querySelector('#timer span');
        const heartsEl = document.querySelector('#hearts span');
        const answerText = document.getElementById('answer-text');
        const checkBtn = document.getElementById('check-btn');
        const playSoundBtn = document.getElementById('play-sound-btn');
        const keyboardContainer = document.getElementById('keyboard-container');
        const spinnerOverlay = document.getElementById('spinner-overlay');
        const spinnerResult = document.getElementById('spinner-result');
        const spinBtn = document.getElementById('spin-btn');
        const startQuestionBtn = document.getElementById('start-question-btn');
        const feedbackOverlay = document.getElementById('feedback-overlay');
        const feedbackBox = document.getElementById('feedback-box');
        const feedbackTitle = document.getElementById('feedback-title');
        const feedbackText = document.getElementById('feedback-text');
        const nextQuestionBtn = document.getElementById('next-question-btn');
        const audio = { word: document.getElementById('word-audio'), correct: document.getElementById('correct-sound'), incorrect: document.getElementById('incorrect-sound'), spinner: document.getElementById('spinner-sound'), action: document.getElementById('action-sound'), };

        let lives = 3;
        let score = 0;
        let currentWordIndex = 0;
        let timerInterval;

        function createKeyboard() {
            keyboardContainer.innerHTML = '';
            thaiKeyboardLayout.forEach(row => {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'keyboard-row';
                row.forEach(keyChar => {
                    const keyBtn = document.createElement('button');
                    keyBtn.className = 'key';
                    keyBtn.textContent = keyChar;
                    keyBtn.onclick = () => appendToAnswer(keyChar);
                    rowDiv.appendChild(keyBtn);
                });
                keyboardContainer.appendChild(rowDiv);
            });
            const specialRow = document.createElement('div');
            specialRow.className = 'keyboard-row';
            const spaceBtn = document.createElement('button');
            spaceBtn.className = 'key special space';
            spaceBtn.textContent = '‡πÄ‡∏ß‡πâ‡∏ô‡∏ß‡∏£‡∏£‡∏Ñ';
            spaceBtn.onclick = () => appendToAnswer(' ');
            const backspaceBtn = document.createElement('button');
            backspaceBtn.className = 'key special';
            backspaceBtn.textContent = '‡∏•‡∏ö';
            backspaceBtn.onclick = backspace;
            specialRow.appendChild(spaceBtn);
            specialRow.appendChild(backspaceBtn);
            keyboardContainer.appendChild(specialRow);
        }

        function appendToAnswer(char) {
            audio.action.currentTime = 0;
            audio.action.play();
            answerText.textContent += char;
        }

        function backspace() {
            audio.action.currentTime = 0;
            audio.action.play();
            answerText.textContent = answerText.textContent.slice(0, -1);
        }
        
        function setupQuestion() {
            if (currentWordIndex >= wordList.length) { endGame(true); return; }
            answerText.textContent = '';
            checkBtn.disabled = false;
            playSoundBtn.onclick = () => { audio.word.src = wordList[currentWordIndex].audio; audio.word.play(); };
            startTimer();
            updateDisplay();
            setTimeout(() => playSoundBtn.click(), 500);
        }

        function checkAnswer() {
            clearInterval(timerInterval);
            checkBtn.disabled = true;
            const isCorrect = answerText.textContent.trim() === wordList[currentWordIndex].word;
            showFeedback(isCorrect);
        }
        
        function showFeedback(isCorrect) {
            const currentWord = wordList[currentWordIndex];
            if (isCorrect) {
                score += 10;
                feedbackTitle.textContent = '‚úÖ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!';
                feedbackText.textContent = `‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å‡πÄ‡∏•‡∏¢‡∏Ñ‡πà‡∏∞`;
                feedbackBox.className = 'box correct';
                audio.correct.play();
            } else {
                lives--;
                feedbackTitle.textContent = '‚ùå ‡∏ú‡∏¥‡∏î‡∏Ñ‡πà‡∏∞';
                feedbackText.textContent = `‡∏Ñ‡∏≥‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏∑‡∏≠ "${currentWord.word}"`;
                feedbackBox.className = 'box incorrect';
                audio.incorrect.play();
            }
            updateDisplay();
            feedbackOverlay.classList.remove('hidden');
        }

        function proceedToNextStep() {
            feedbackOverlay.classList.add('hidden');
            if (lives <= 0) {
                endGame(false);
            } else {
                currentWordIndex++;
                if (currentWordIndex < wordList.length) {
                    spinnerOverlay.classList.remove('hidden');
                    spinBtn.style.display = 'inline-block';
                    startQuestionBtn.style.display = 'none';
                    spinnerResult.textContent = '???';
                } else {
                    endGame(true);
                }
            }
        }
        
        function updateDisplay() {
            scoreEl.textContent = score;
            heartsEl.textContent = lives;
            timerEl.textContent = 60;
        }

        function startTimer() {
            clearInterval(timerInterval);
            let timeLeft = 60;
            timerEl.textContent = timeLeft;
            timerInterval = setInterval(() => {
                timeLeft--;
                timerEl.textContent = timeLeft;
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    checkBtn.disabled = true;
                    showFeedback(false);
                }
            }, 1000);
        }
        
        function endGame(isWin) {
            clearInterval(timerInterval);
            gameContainer.innerHTML = `
                <h1>${isWin ? `üéâ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏Ç‡πâ‡∏≠‡πÅ‡∏•‡πâ‡∏ß ‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ${score} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô! üéâ` : `GAME OVER! ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÅ‡∏•‡πâ‡∏ß`}</h1>
                <button onclick="window.location.reload()" style="background-color: #3498db;">‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
            `;
            gameContainer.style.display = 'block';
            spinnerOverlay.classList.add('hidden');
            feedbackOverlay.classList.add('hidden');
        }

        checkBtn.addEventListener('click', checkAnswer);
        nextQuestionBtn.addEventListener('click', proceedToNextStep);
        spinBtn.addEventListener('click', () => {
            spinBtn.disabled = true;
            audio.spinner.currentTime = 0;
            audio.spinner.play(); 
            let spinCount = 0;
            const spinInterval = setInterval(() => {
                spinnerResult.textContent = studentNames[Math.floor(Math.random() * studentNames.length)];
                if (++spinCount > 25) { 
                    clearInterval(spinInterval);
                    audio.spinner.pause(); 
                    spinBtn.disabled = false;
                    spinBtn.style.display = 'none';
                    startQuestionBtn.style.display = 'inline-block';
                }
            }, 100);
        });
        startQuestionBtn.addEventListener('click', () => {
            audio.action.play();
            spinnerOverlay.classList.add('hidden');
            gameContainer.style.display = 'block';
            setupQuestion();
        });
        
        createKeyboard();
        updateDisplay();
    </script>
</body>
</html>

