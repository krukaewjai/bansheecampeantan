<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡πÄ‡∏Å‡∏°‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏Ñ‡∏≥‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô ‡∏õ.4</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700&display=swap');
        body { 
            font-family: 'Sarabun', sans-serif; 
            color: #333; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            margin: 0; 
            user-select: none;
            background-image: url('https://lh5.googleusercontent.com/d/1p28Ss160fZWFSe67QLrgHvPcZgN4bgAZ');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        #game-container { width: 90%; max-width: 800px; background-color: rgba(255, 255, 255, 0.95); padding: 25px; border-radius: 15px; box-shadow: 0 4px 20px rgba(0,0,0,0.2); text-align: center; }
        h1 { color: #0056b3; }
        #game-info { display: flex; justify-content: space-around; align-items: center; font-size: 1.5em; margin-bottom: 20px; font-weight: bold; }
        #hearts span, #timer span { margin-left: 10px; }
        #hearts { color: #e74c3c; }
        #timer { color: #f39c12; }
        #score { color: #2ecc71; }
        #question-area { background-color: #eef5ff; padding: 15px; border-radius: 10px; margin-bottom: 20px; }
        #letters-container { display: flex; justify-content: center; flex-wrap: wrap; gap: 10px; margin-bottom: 20px; min-height: 50px; }
        #answer-box { display: flex; justify-content: space-between; align-items: center; min-height: 70px; background-color: #ecf0f1; padding: 10px 20px; border-radius: 10px; border: 2px solid #bdc3c7; font-size: 2.5em; font-weight: bold; color: #2c3e50; }
        #answer-text { flex-grow: 1; text-align: center; }
        .letter-btn { width: 60px; height: 60px; display: flex; justify-content: center; align-items: center; font-size: 2em; background-color: #3498db; color: white; border-radius: 8px; cursor: pointer; transition: background-color 0.2s, transform 0.2s; border: none; font-family: 'Sarabun', sans-serif; }
        .letter-btn:hover { background-color: #2980b9; transform: scale(1.05); }
        .letter-btn:disabled { background-color: #bdc3c7; cursor: not-allowed; opacity: 0.5; }
        .button-container { margin-top: 20px; display: flex; justify-content: center; gap: 15px; }
        button { font-family: 'Sarabun', sans-serif; font-size: 1.2em; padding: 10px 25px; border-radius: 8px; border: none; color: white; cursor: pointer; transition: background-color 0.3s; }
        #check-btn { background-color: #27ae60; }
        #check-btn:hover { background-color: #2ecc71; }
        #play-sound-btn { font-size: 1.5em; background-color: #9b59b6; padding: 10px; }
        #clear-btn { background-color: #e74c3c; font-size: 1.2em; padding: 10px 15px; }
        #spinner-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.7); display: flex; justify-content: center; align-items: center; z-index: 1000; }
        #spinner-box { background-color: white; padding: 40px; border-radius: 15px; text-align: center; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
        #spinner-result { font-size: 2.5em; font-weight: bold; margin-bottom: 20px; min-height: 50px; color: #0056b3; }
        #spin-btn { background-color: #8e44ad; }
        #start-question-btn { background-color: #f39c12; display: none; }
    </style>
</head>
<body>
    <div id="game-container" style="display:none;">
        <h1>‡πÄ‡∏Å‡∏°‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏Ñ‡∏≥‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô ‡∏õ.4</h1>
        <div id="game-info">
            <div id="score">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: <span>0</span></div>
            <div id="timer">‚è±Ô∏è ‡πÄ‡∏ß‡∏•‡∏≤: <span>60</span></div>
            <div id="hearts">‚ù§Ô∏è ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï: <span>3</span></div>
        </div>
        <div id="question-area">
            <h2>‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏£‡∏π‡∏õ‡∏•‡∏≥‡πÇ‡∏û‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ü‡∏±‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏Ñ‡∏≥‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á:</h2>
            <button id="play-sound-btn">üîä</button>
        </div>
        <p>‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÉ‡∏´‡πâ</p>
        <div id="letters-container"></div>
        <p>‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
        <div id="answer-box">
            <span id="answer-text"></span>
            <button id="clear-btn" title="‡∏•‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î">‡∏•‡πâ‡∏≤‡∏á</button>
        </div>
        <div class="button-container">
            <button id="check-btn">‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
        </div>
    </div>
    <div id="spinner-overlay">
        <div id="spinner-box">
            <h2>‡∏™‡∏∏‡πà‡∏°‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏ï‡∏≠‡∏ö!</h2>
            <div id="spinner-result">???</div>
            <button id="spin-btn">‡∏™‡∏∏‡πà‡∏°‡∏ä‡∏∑‡πà‡∏≠</button>
            <button id="start-question-btn">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏ô‡∏µ‡πâ</button>
        </div>
    </div>

    <audio id="word-audio" preload="auto"></audio>
    <audio id="correct-sound" src="https://www.myinstants.com/media/sounds/thuukt-ng.mp3" preload="auto"></audio>
    <audio id="incorrect-sound" src="https://www.myinstants.com/media/sounds/phidduuaihm.mp3" preload="auto"></audio>
    <audio id="spinner-sound" src="https://www.myinstants.com/media/sounds/999-social-credit-siren.mp3" preload="auto"></audio>
    <audio id="start-sound" src="https://www.myinstants.com/media/sounds/pop_7e9Is8L.mp3" preload="auto"></audio>

    <script>
        const studentNames = [ "‡∏ï‡∏∞‡∏ß‡∏±‡∏ô", "‡∏™‡∏ï‡∏£‡∏¥‡∏á", "‡∏ì‡∏¥‡∏ä‡∏≤", "‡∏Å‡∏±‡∏ç‡∏ç‡πå", "‡∏≠‡∏π‡πã", "‡πÄ‡∏à‡∏•", "‡∏≠‡∏≠‡∏£‡πå‡πÅ‡∏Å‡∏ô", "‡∏ß‡∏µ‡πÇ‡∏Å‡πâ", "‡∏Å‡∏°‡∏•‡∏ä‡∏±‡∏¢", "‡∏ß‡∏≤‡∏ß‡∏≤" ];
        const wordList = [
            { word: "‡∏Å‡∏é‡πÄ‡∏Å‡∏ì‡∏ë‡πå", audio: "https://www.myinstants.com/media/sounds/kdeknth.mp3" }, { word: "‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢", audio: "https://www.myinstants.com/media/sounds/kdhmaay.mp3" }, { word: "‡∏Å‡∏ï‡πÄ‡∏ß‡∏ó‡∏µ", audio: "https://www.myinstants.com/media/sounds/ktewthii.mp3" },
            { word: "‡∏Å‡∏ï‡∏±‡∏ç‡∏ç‡∏π", audio: "https://www.myinstants.com/media/sounds/ktayyuu.mp3" }, { word: "‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤", audio: "https://www.myinstants.com/media/sounds/ktikaa.mp3" }, { word: "‡∏Å‡πâ‡∏ô", audio: "https://www.myinstants.com/media/sounds/kn_g3unyRS.mp3" },
            { word: "‡∏Å‡∏£", audio: "https://www.myinstants.com/media/sounds/k-n_Li3PmUo.mp3" }, { word: "‡∏Å‡∏£‡∏°", audio: "https://www.myinstants.com/media/sounds/krm.mp3" }, { word: "‡∏Å‡∏£‡∏°‡∏û‡∏£‡∏∞‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÄ‡∏û‡∏ä‡∏£‡∏≠‡∏±‡∏Ñ‡∏£‡πÇ‡∏¢‡∏ò‡∏¥‡∏ô", audio: "https://www.myinstants.com/media/sounds/krmphrakamaephngephchr-akhroythin.mp3" },
            { word: "‡∏Å‡∏£‡∏°‡∏û‡∏£‡∏∞‡∏õ‡∏£‡∏°‡∏≤‡∏ô‡∏∏‡∏ä‡∏¥‡∏ï‡∏ä‡∏¥‡πÇ‡∏ô‡∏£‡∏™", audio: "https://www.myinstants.com/media/sounds/krmphraprmaanuchitchionrs.mp3" }
        ];

        // --- ‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏° ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ---

        const gameContainer = document.getElementById('game-container');
        const scoreEl = document.querySelector('#score span');
        const timerEl = document.querySelector('#timer span');
        const heartsEl = document.querySelector('#hearts span');
        const lettersContainer = document.getElementById('letters-container');
        const answerText = document.getElementById('answer-text');
        const checkBtn = document.getElementById('check-btn');
        const clearBtn = document.getElementById('clear-btn');
        const playSoundBtn = document.getElementById('play-sound-btn');
        const wordAudio = document.getElementById('word-audio');
        const spinnerOverlay = document.getElementById('spinner-overlay');
        const spinnerResult = document.getElementById('spinner-result');
        const spinBtn = document.getElementById('spin-btn');
        const startQuestionBtn = document.getElementById('start-question-btn');
        
        const correctSound = document.getElementById('correct-sound');
        const incorrectSound = document.getElementById('incorrect-sound');
        const spinnerSound = document.getElementById('spinner-sound');
        const startSound = document.getElementById('start-sound');

        let lives = 3;
        let score = 0;
        let currentWordIndex = 0;
        let timerInterval;
        let clickedLetters = [];

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        function playAndProcess(isCorrect) {
            if (isCorrect) {
                correctSound.play();
                score += 10;
                setTimeout(() => {
                    alert('‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! ‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å‡∏Ñ‡πà‡∏∞');
                    currentWordIndex++;
                    updateDisplay();
                    if (currentWordIndex < wordList.length) {
                        spinnerOverlay.style.display = 'flex';
                        spinBtn.style.display = 'inline-block';
                        startQuestionBtn.style.display = 'none';
                        spinnerResult.textContent = '???';
                    } else { 
                        endGame(true); 
                    }
                }, 300);
            } else {
                incorrectSound.play();
                lives--;
                const correctWord = wordList[currentWordIndex].word;
                setTimeout(() => {
                    if (lives > 0) {
                        alert(`‡∏ú‡∏¥‡∏î! ‡∏Ñ‡∏≥‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏∑‡∏≠ "${correctWord}" (‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ${lives} ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï)`);
                        currentWordIndex++;
                        updateDisplay();
                        if (currentWordIndex < wordList.length) {
                            spinnerOverlay.style.display = 'flex';
                            spinBtn.style.display = 'inline-block';
                            startQuestionBtn.style.display = 'none';
                            spinnerResult.textContent = '???';
                        } else { 
                            endGame(true); 
                        }
                    } else {
                        alert(`‡∏Ñ‡∏≥‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏∑‡∏≠ "${correctWord}"`);
                        endGame(false);
                    }
                }, 500);
            }
        }

        function checkAnswer() {
            clearInterval(timerInterval);
            checkBtn.disabled = true;
            const isCorrect = answerText.textContent === wordList[currentWordIndex].word;
            playAndProcess(isCorrect);
        }

        function setupQuestion() {
            if (currentWordIndex >= wordList.length) { endGame(true); return; }
            lettersContainer.innerHTML = '';
            answerText.textContent = '';
            clickedLetters = [];
            checkBtn.disabled = false;
            playSoundBtn.onclick = () => {
                wordAudio.src = wordList[currentWordIndex].audio;
                wordAudio.play();
            };
            const characters = shuffleArray(wordList[currentWordIndex].word.split(''));
            characters.forEach((char, index) => {
                const letterBtn = document.createElement('button');
                letterBtn.classList.add('letter-btn');
                letterBtn.textContent = char;
                letterBtn.dataset.id = index;
                letterBtn.onclick = () => handleLetterClick(letterBtn, char);
                lettersContainer.appendChild(letterBtn);
            });
            startTimer();
            updateDisplay();
            setTimeout(() => playSoundBtn.click(), 500);
        }

        function handleLetterClick(button, char) {
            answerText.textContent += char;
            button.disabled = true;
            clickedLetters.push(button);
        }

        clearBtn.addEventListener('click', () => {
            answerText.textContent = '';
            clickedLetters.forEach(btn => btn.disabled = false);
            clickedLetters = [];
        });

        function updateDisplay() {
            scoreEl.textContent = score;
            heartsEl.textContent = lives;
            timerEl.textContent = 60;
        }

        function startTimer() {
            clearInterval(timerInterval);
            let timeLeft = 60;
            timerEl.textContent = timeLeft;
            timerInterval = setInterval(() => {
                timeLeft--;
                timerEl.textContent = timeLeft;
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    checkBtn.disabled = true;
                    playAndProcess(false);
                }
            }, 1000);
        }

        function endGame(isWin) {
            gameContainer.innerHTML = `
                <h1>${isWin ? `üéâ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏Ç‡πâ‡∏≠‡πÅ‡∏•‡πâ‡∏ß ‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ${score} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô! üéâ` : `GAME OVER! ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÅ‡∏•‡πâ‡∏ß`}</h1>
                <button onclick="window.location.reload()" style="background-color: #3498db;">‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
            `;
            gameContainer.style.display = 'block';
        }
        
        checkBtn.addEventListener('click', checkAnswer);
        
        spinBtn.addEventListener('click', () => {
            spinBtn.disabled = true;
            spinnerSound.currentTime = 0;
            spinnerSound.play(); 

            let spinCount = 0;
            const spinInterval = setInterval(() => {
                spinnerResult.textContent = studentNames[Math.floor(Math.random() * studentNames.length)];
                if (++spinCount > 25) { 
                    clearInterval(spinInterval);
                    spinnerSound.pause(); 
                    spinBtn.disabled = false;
                    spinBtn.style.display = 'none';
                    startQuestionBtn.style.display = 'inline-block';
                }
            }, 100);
        });

        startQuestionBtn.addEventListener('click', () => {
            startSound.play();
            spinnerOverlay.style.display = 'none';
            gameContainer.style.display = 'block';
            setupQuestion();
        });
        updateDisplay();
    </script>
</body>
</html>